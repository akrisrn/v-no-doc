# 目前存在的一些问题

@tags: 开发
@updated: 1609608091000, 1612967165000
@creator: AkrISrn
@updater: AkrISrn
@commit: f2533ab

这里列出的问题在 v-no 的预期表现之外，并且还没能 / 无法解决。

1. 如果当前页面有图片正在加载，浏览器有可能会阻止 Hash 路由进行跳转（地址变了但是页面没有变）。这时你要么等待图片加载完成，要么就只能刷新页面。
    - 可能的解决方案：完全没主意。
1. 嵌套 [](/zh/docs/details.md "#")会出现开闭匹配错误。
    - 可能的解决方案：完全没主意，大概涉及到上游代码。
1. 锚点和标题的问题比较严重，它影响了多个功能，需要大量改动渲染方面的代码。
    1. 因为 Hash 路由地址占用了页面锚点的功能，我只能在它上面重新实现一个锚点。新锚点使用标题层级加序号进行索引，虽然定位准确，但是难以引用和更新。
        - 可能的解决方案：还是回归引用标题文本的锚点模式比较好。
    1. [](/zh/docs/snippets.md "#")的块嵌入在自动降级标题时无法判断以 `#` 开头的行是不是需要降级的标题（非 `<article>` 的直接子元素和代码注释显然不能降级），这主要是因为正则替换很难匹配上下文。
        - 可能的解决方案：只能修改 markdown-it 解析出的 Token 再渲染了。
    1. [Hash 地址链接](/zh/docs/links.md "#")会优先跳转到当前页面中和它链接到相同文件的最近的标题，而它的锚点会失效。如果这是一个块嵌入的标题就会很奇怪，但是这里没有上下文可以判断它是否为块嵌入（就算能判断，也无法用现在的锚点模式在块嵌入中定位）。
        - 可能的解决方案：完全没主意。
