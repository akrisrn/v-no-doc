(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["main"],{"615d":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-fade"}},[t.isShow?s("main",{class:t.isError?"error":null},[t.cover?s("div",{staticClass:"center",attrs:{id:"cover"}},[s("img",{attrs:{src:t.cover,alt:"cover"}})]):t._e(),t.isError?t._e():s("div",{staticClass:"bar",attrs:{id:"bar"}},[t.isIndexFile?t._e():s("code",{staticClass:"item-home"},[s("a",{attrs:{href:t.homePath},on:{click:function(e){return e.preventDefault(),t.returnHome(e)}}},[t._v("Â«")])]),t.startDate?s("code",{staticClass:"item-date"},[t._v(t._s(t.isIndexFile?t.endDate:t.startDate))]):t._e(),t.creator?s("code",{staticClass:"item-creator"},[t._v(t._s(t.creator))]):t._e(),t._l(t.tags,(function(e){return s("code",{key:e,staticClass:"item-tag"},[t._l(t.getSearchTagLinks(e),(function(e){return[s("a",{key:e[0],attrs:{href:e[0]}},[t._v(t._s(e[1]))])]}))],2)})),t._l(t.otherFlags,(function(e,i){return s("code",{key:i,class:"item-"+e[0]},[t._v(t._s(e[1]))])})),s("code",{staticClass:"item-raw"},[s("a",{attrs:{href:t.rawFilePath,target:"_blank"}},[t._v(t._s(t.config.messages.raw))])])],2),!t.isRedirectPage&&t.redirectFrom[0].length>0?s("div",{attrs:{id:"redirect-from"}},[t._v(t._s(t.config.messages.redirectFrom)+" "),t._l(t.redirectFrom[0],(function(e,i){return s("a",{key:e,attrs:{href:"#"+e}},[t._v(t._s(t.redirectFrom[1][i]))])}))],2):t._e(),s("header",[t._v(t._s(t.title))]),s("Article",{attrs:{anchor:t.anchor,fileData:t.fileData,filePath:t.filePath,query:t.query,showTime:t.showTime}}),t.isError?t._e():s("div",{attrs:{id:"backlinks"}},[t.hasLoadedBacklinks?t._e():s("div",{class:["icon",{loading:t.isLoadingBacklinks}],domProps:{innerHTML:t._s(t.isLoadingBacklinks?t.iconSync:t.iconBacklink)}}),t.isLoadingBacklinks?s("span",[t._v(t._s(t.config.messages.loading))]):t.hasLoadedBacklinks?[t.backlinkFiles.length>0?s("ul",t._l(t.backlinkFiles,(function(e){return s("li",{key:e.path,staticClass:"article",domProps:{innerHTML:t._s(t.getListHtml(e))}})})),0):s("span",[t._v(t._s(t.config.messages.noBacklinks))])]:s("a",{on:{click:t.getBacklinks}},[t._v(t._s(t.config.messages.showBacklinks))])],2),t.isIndexFile?t._e():s("footer",[s("a",{staticClass:"home",attrs:{href:t.homePath},on:{click:function(e){return e.preventDefault(),t.returnHome(e)}}},[t._v(t._s(t.config.messages.returnHome))]),!t.isError&&t.startDate?[s("span",{staticClass:"filler"}),s("span",{staticClass:"date"},[t._v(t._s(t.endDate!==t.startDate?t.endDate+t.lastUpdatedMessage:t.startDate))])]:t._e()],2)],1):t._e()])},a=[],r=(s("ddb0"),s("9ab4")),n=s("bb76"),o=s("8964"),c=s("4c55"),h=s("35f0"),l=s("b00f"),d=s("1889"),u=s("72db");function g(){Object(u["a"])({version:"1.1.9",addInputBinds:d["addInputBinds"],addEventListener:(t,e,s)=>{t.addEventListener(e,s),d["destructors"].push(()=>t.removeEventListener(e,s))},destructors:d["destructors"]}),Object(u["a"])({config:n,element:o,enums:c,path:h,store:l,utils:d})}var f=s("8ef8"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{class:t.isRendering?"rendering":null,domProps:{innerHTML:t._s(t.html)}})},p=[],k=s("1b40");let b=class extends k["c"]{constructor(){super(...arguments),this.startTime=0,this.isRendering=!0,this.renderData=""}get html(){return this.renderData?this.markdownTs.renderMD(this.renderData)+"\x3c!-- "+this.showTime+" --\x3e":""}get isCategoryFile(){return this.filePath===n["config"].paths.category}get isSearchFile(){return this.filePath===n["config"].paths.search}async created(){Object(u["a"])({articleSelf:this}),this.markdownTs=await Object(f["c"])(),Object(o["dispatchEvent"])(c["EEvent"].articleCreated,(new Date).getTime()).then(),this.renderMD()}renderMD(t=this.fileData){if(this.startTime=(new Date).getTime(),this.isRendering=!0,t&&(t=this.markdownTs.utils.replaceInlineScript(this.filePath,t)),!t)return this.renderData="",void this.renderComplete();this.renderData=t;const{updateCategoryPage:e,updateDom:s,updateSearchPage:i,updateSnippet:a}=this.markdownTs;this.$nextTick(()=>{Promise.all([a(t),s()]).then(([s])=>{if(!s)return this.renderData="",void this.renderComplete();this.isCategoryFile?e(s).then(e=>this.updateData(t,e)):(this.updateData(t,s),this.isSearchFile&&this.$nextTick(()=>i(this.query.content||"")))})})}updateData(t,e){e!==t?(this.renderData=e,this.$nextTick(()=>{this.markdownTs.updateDom().then(()=>{this.renderComplete()})})):this.renderComplete()}renderComplete(){this.isRendering=!1,this.$nextTick(()=>{Object(o["removeClass"])(this.$el),Object(o["dispatchEvent"])(c["EEvent"].rendered,(new Date).getTime()-this.startTime,100);const t=this.markdownTs.utils.getAnchorRegExp();if(!t.test(this.anchor))return;const e=document.querySelector(`article > *[id="${this.anchor}"]`);e&&e.offsetTop>0&&Object(o["scroll"])(e.offsetTop-6)})}onShowTimeChanged(){this.renderMD()}onHTMLChanged(){this.$nextTick(()=>Object(o["dispatchEvent"])(c["EEvent"].htmlChanged,(new Date).getTime()))}};Object(r["a"])([Object(k["b"])()],b.prototype,"filePath",void 0),Object(r["a"])([Object(k["b"])()],b.prototype,"fileData",void 0),Object(r["a"])([Object(k["b"])()],b.prototype,"anchor",void 0),Object(r["a"])([Object(k["b"])()],b.prototype,"query",void 0),Object(r["a"])([Object(k["b"])()],b.prototype,"showTime",void 0),Object(r["a"])([Object(k["d"])("showTime")],b.prototype,"onShowTimeChanged",null),Object(r["a"])([Object(k["d"])("html")],b.prototype,"onHTMLChanged",null),b=Object(r["a"])([k["a"]],b);var v=b,O=v,j=s("2877"),_=Object(j["a"])(O,m,p,!1,null,null,null),D=_.exports;k["a"].registerHooks(["beforeRouteUpdate"]);let y=class extends k["c"]{constructor(){super(...arguments),this.fileTs=null,this.fileData="",this.title="",this.tags=[],this.startDate="",this.endDate="",this.cover="",this.creator="",this.updater="",this.otherFlags=[],this.anchor="",this.queryStr="",this.links=[],this.backlinks=[],this.backlinkFiles=[],this.isLoadingBacklinks=!1,this.hasLoadedBacklinks=!1,this.isShow=!1,this.showTime=0,this.isError=!1,this.isCancel=!1,this.isRedirectPage=!1,this.redirectFrom=[[],[]]}get homePath(){return l["state"].homePath}get config(){return n["config"]}get filePath(){const{path:t,anchor:e,query:s}=Object(h["parseRoute"])(this.$route);return this.anchor=e,this.queryStr=s,t}get shortFilePath(){return Object(h["shortenPath"])(this.filePath)}get rawFilePath(){return Object(h["addBaseUrl"])(this.filePath)}get query(){return Object(h["parseQuery"])(this.queryStr)}get isIndexFile(){return this.filePath===this.config.paths.index}get lastUpdatedMessage(){return` | ${this.config.messages.lastUpdated}${this.updater?` (${this.updater})`:""}`}get iconSync(){return Object(o["getIcon"])(c["EIcon"].sync)}get iconBacklink(){return Object(o["getIcon"])(c["EIcon"].backlink,18)}created(){const t=this.homePath,e=this.shortFilePath;if("prerender"===document.body.id){let s=t;return this.isIndexFile||(s+="#"+e),location.href=s+location.search,void(this.isCancel=!0)}if(location.search){const s=location.search.substr(1)+(this.queryStr?"&"+this.queryStr:"");return location.href=t+Object(h["buildHash"])({path:e,anchor:this.anchor,query:Object(h["formatQuery"])(Object(h["parseQuery"])(s))}),void(this.isCancel=!0)}if(n["enableMultiConf"]){const t=this.query.conf;if(t&&n["confList"][0].includes(t)&&Object(n["getSelectConf"])()!==t)return localStorage.setItem("conf",t),location.reload(),void(this.isCancel=!0)}Object(u["a"])({mainSelf:this,reload:this.reload,filePath:this.filePath}),g(),this.getData().then(({data:t,flags:e,links:s})=>this.setData(t,e,s))}mounted(){this.isCancel||Object(o["simpleUpdateLinkPath"])()}beforeRouteUpdate(t,e,s){const i=Object(h["parseRoute"])(t),a=Object(h["parseRoute"])(e);i.path===a.path&&i.query===a.query||(this.isShow=!1,s(),Object(u["a"])({filePath:this.filePath}),this.isRedirectPage?this.isRedirectPage=!1:this.redirectFrom=[[],[]],this.reload(!0))}reload(t=!1){Object(o["cleanEventListenerDict"])(),this.getData().then(({data:e,flags:s,links:i})=>{document.querySelectorAll(".custom").forEach(t=>t.remove());let a=d["destructors"].shift();while(a)"function"===typeof a&&a(),a=d["destructors"].shift();this.setData(e,s,i),t&&Object(o["scroll"])(0,!1)})}async getData(){this.fileTs||(this.fileTs=await Object(f["b"])());const{createErrorFile:t,getFile:e}=this.fileTs,s=this.filePath;if(!s.endsWith(".md")){this.isError=!0;const{data:e,flags:i,links:a}=t(s);return{data:e,flags:i,links:a}}const i=[];i.push(e(s));const a=this.config.paths.common;a&&s!==a&&i.push(e(a));const r=await Promise.all(i),n=r[0];let o=n.data;const c=n.flags,l=n.links;if(n.isError)return this.isError=!0,{data:o,flags:c,links:l};this.isError=!1;const u=o.match(/^\[redirect\s+(\/\S+\.md)(?:#(\S+))?(?:\?(\S+))?]$/);if(u&&!this.redirectFrom[0].includes(s)){this.isRedirectPage=!0,this.redirectFrom[0].push(s),this.redirectFrom[1].push(c.title);const[,t,e,i]=u;return location.hash=Object(h["buildHash"])({path:Object(h["shortenPath"])(t),anchor:e||this.anchor,query:i||this.queryStr}),{data:o,flags:c,links:l}}if(this.hasLoadedBacklinks&&this.getBacklinks().then(),r.length<2||r[1].isError)return{data:o,flags:c,links:l};const g=r[1].data;let m="",p=g;const[k,b]=Object(d["chopStr"])(g,d["snippetMark"]);return null!==b&&(m=k,p=b),m&&(o=m+"\n\n\n"+o),p&&(o+="\n\n\n"+p),{data:o,flags:c,links:l}}setData(t,e,s){this.setFlags(e),this.fileData=t,this.links=[...s],this.isShow=!0,this.showTime=(new Date).getTime()}setFlags(t){this.title=t.title,this.tags=t.tags?[...t.tags]:[],this.startDate=t.startDate||"",this.endDate=t.endDate||"",this.cover=t.cover||"",this.creator=t.creator||"",this.updater=t.updater||"",this.otherFlags=[],Object.keys(t).sort().forEach(e=>{c["definedFlags"].includes(e)||this.addFlag(e,t[e],!1)})}addFlag(t,e,s=!0){this.otherFlags.push([t,e]),s&&(this.otherFlags=this.otherFlags.sort((t,e)=>t[0].localeCompare(e[0])))}removeFlag(t){for(let e=0;e<this.otherFlags.length;e++)if(this.otherFlags[e][0]===t){this.otherFlags.splice(e,1);break}}async getBacklinks(){this.isLoadingBacklinks=!0,this.fileTs||(this.fileTs=await Object(f["b"])());const{getFiles:t,sortFiles:e}=this.fileTs,{files:s,backlinks:i}=await t(),a=i[this.filePath];a&&a.length>0?(this.backlinks=[...a],this.backlinkFiles=a.map(t=>JSON.parse(JSON.stringify(s[t]))).sort(e)):(this.backlinks=[],this.backlinkFiles=[]),this.isLoadingBacklinks=!1,this.hasLoadedBacklinks||(this.hasLoadedBacklinks=!0)}onTitleChanged(){document.title=this.title,this.config.siteName&&this.config.siteName!==this.title&&(document.title+=" - "+this.config.siteName)}getListHtml(t){return Object(o["createList"])(t).innerHTML}getSearchTagLinks(t){return Object(o["getSearchTagLinks"])(t)}returnHome(){Object(h["returnHome"])()}};Object(r["a"])([Object(k["d"])("title")],y.prototype,"onTitleChanged",null),y=Object(r["a"])([Object(k["a"])({components:{Article:D}})],y);var T=y,F=T,w=Object(j["a"])(F,i,a,!1,null,null,null);e["default"]=w.exports}}]);