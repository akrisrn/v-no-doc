(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["main"],{"615d":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-fade"}},[t.isShow?s("main",{class:t.isError?"error":null},[t.cover?s("div",{staticClass:"center",attrs:{id:"cover"}},[s("img",{attrs:{src:t.cover,alt:"cover"}})]):t._e(),t.isError?t._e():s("div",{staticClass:"bar",attrs:{id:"bar"}},[t.isIndexFile?t._e():s("code",{staticClass:"item-home"},[s("a",{attrs:{href:t.homePath},on:{click:function(e){return e.preventDefault(),t.returnHome(e)}}},[t._v("Â«")])]),t.startDate?s("code",{staticClass:"item-date"},[t._v(t._s(t.isIndexFile?t.endDate:t.startDate))]):t._e(),t.creator?s("code",{staticClass:"item-creator"},[t._v(t._s(t.creator))]):t._e(),t._l(t.tags,(function(e){return s("code",{key:e,staticClass:"item-tag"},[t._l(t.getSearchTagLinks(e),(function(e){return[s("a",{key:e[0],attrs:{href:e[0]}},[t._v(t._s(e[1]))])]}))],2)})),t._l(Object.keys(t.otherFlags).sort(),(function(e){return s("code",{key:e,class:"item-"+e},[t._v(t._s(t.otherFlags[e]))])})),s("code",{staticClass:"item-raw"},[s("a",{attrs:{href:t.rawFilePath,target:"_blank"}},[t._v(t._s(t.config.messages.raw))])])],2),s("header",[t._v(t._s(t.title))]),s("Article",{attrs:{anchor:t.anchor,fileData:t.fileData,filePath:t.filePath,query:t.query,showTime:t.showTime}}),t.isError?t._e():s("div",{attrs:{id:"backlinks"}},[t.hasLoadedBacklinks?t._e():s("div",{class:["icon",{loading:t.isLoadingBacklinks}],domProps:{innerHTML:t._s(t.isLoadingBacklinks?t.iconSync:t.iconBacklink)}}),t.isLoadingBacklinks?s("span",[t._v(t._s(t.config.messages.loading))]):t.hasLoadedBacklinks?[t.backlinkFiles.length>0?s("ul",t._l(t.backlinkFiles,(function(e){return s("li",{key:e.path,staticClass:"article",domProps:{innerHTML:t._s(t.getListHtml(e))}})})),0):s("span",[t._v(t._s(t.config.messages.noBacklinks))])]:s("a",{on:{click:t.getBacklinks}},[t._v(t._s(t.config.messages.showBacklinks))])],2),t.isIndexFile?t._e():s("footer",[s("a",{staticClass:"home",attrs:{href:t.homePath},on:{click:function(e){return e.preventDefault(),t.returnHome(e)}}},[t._v(t._s(t.config.messages.returnHome))]),!t.isError&&t.startDate?[s("span",{staticClass:"filler"}),s("span",{staticClass:"date"},[t._v(t._s(t.endDate!==t.startDate?t.endDate+t.lastUpdatedMessage:t.startDate))])]:t._e()],2)],1):t._e()])},a=[],r=(s("ddb0"),s("9ab4")),n=s("bb76"),c=s("8964"),o=s("4c55"),h=s("35f0"),l=s("1889"),d=s("72db");function u(){Object(d["a"])({version:"1.1.8",addInputBinds:l["addInputBinds"],addEventListener:(t,e,s)=>{t.addEventListener(e,s),l["destructors"].push(()=>t.removeEventListener(e,s))},destructors:l["destructors"]}),Object(d["a"])({config:n,element:c,enums:o,path:h,utils:l})}var f=s("b00f"),g=s("8ef8"),k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{ref:"article",class:t.isRendering?"rendering":null,domProps:{innerHTML:t._s(t.html)}})},m=[],p=s("1b40");let b=class extends p["c"]{constructor(){super(...arguments),this.startTime=0,this.isRendering=!0,this.html="",this.renderData=""}get sourceData(){return this.fileData?this.markdownTs.utils.replaceInlineScript(this.filePath,this.fileData):""}get isCategoryFile(){return this.filePath===n["config"].paths.category}get isSearchFile(){return this.filePath===n["config"].paths.search}async created(){Object(d["a"])({articleSelf:this}),this.markdownTs=await Object(g["c"])(),Object(c["dispatchEvent"])(o["EEvent"].articleCreated,(new Date).getTime()).then(),this.renderMD()}renderMD(){if(this.startTime=(new Date).getTime(),this.isRendering=!0,this.updateHtml(this.sourceData))return;const{updateCategoryPage:t,updateDom:e,updateSearchPage:s,updateSnippet:i}=this.markdownTs;this.$nextTick(()=>{Promise.all([i(this.sourceData),e()]).then(([e])=>{this.isCategoryFile?e?t(e).then(t=>this.updateData(t)):this.updateData(e):(this.updateData(e),this.isSearchFile&&this.$nextTick(()=>s(this.query.content||"")))})})}updateData(t){t!==this.sourceData?this.updateHtml(t)||this.$nextTick(()=>{this.markdownTs.updateDom().then(()=>{this.renderComplete()})}):this.renderComplete()}updateHtml(t){return t?(this.html=this.markdownTs.renderMD(t)+"\x3c!-- "+this.showTime+" --\x3e",this.renderData=t,!1):(this.html="",this.renderData="",this.renderComplete(),!0)}renderComplete(){this.isRendering=!1,this.$nextTick(()=>{Object(c["removeClass"])(this.$refs.article);const t=this.markdownTs.utils.getAnchorRegExp();if(!t.test(this.anchor))return;const e=document.querySelector(`article > *[id="${this.anchor}"]`);e&&e.offsetTop>0&&Object(c["scroll"])(e.offsetTop-6)}),Object(c["dispatchEvent"])(o["EEvent"].rendered,(new Date).getTime()-this.startTime,100)}onHTMLChanged(){Object(c["dispatchEvent"])(o["EEvent"].htmlChanged,(new Date).getTime())}};Object(r["a"])([Object(p["b"])()],b.prototype,"filePath",void 0),Object(r["a"])([Object(p["b"])()],b.prototype,"fileData",void 0),Object(r["a"])([Object(p["b"])()],b.prototype,"anchor",void 0),Object(r["a"])([Object(p["b"])()],b.prototype,"query",void 0),Object(r["a"])([Object(p["b"])()],b.prototype,"showTime",void 0),Object(r["a"])([Object(p["d"])("showTime")],b.prototype,"renderMD",null),Object(r["a"])([Object(p["d"])("html")],b.prototype,"onHTMLChanged",null),b=Object(r["a"])([p["a"]],b);var O=b,v=O,j=s("0c7c"),D=Object(j["a"])(v,k,m,!1,null,null,null),y=D.exports;p["a"].registerHooks(["beforeRouteUpdate"]);let _=class extends p["c"]{constructor(){super(...arguments),this.fileTs=null,this.fileData="",this.title="",this.tags=[],this.startDate="",this.endDate="",this.cover="",this.creator="",this.updater="",this.otherFlags={},this.flagNames=Object.values(o["EFlag"]),this.anchor="",this.queryStr="",this.links=[],this.backlinks=[],this.backlinkFiles=[],this.isLoadingBacklinks=!1,this.hasLoadedBacklinks=!1,this.isShow=!1,this.showTime=0,this.isError=!1,this.isCancel=!1,this.iconSync=Object(c["getIcon"])(o["EIcon"].sync),this.iconBacklink=Object(c["getIcon"])(o["EIcon"].backlink,18),this.store=f["a"]}get homePath(){return this.store.state.homePath}get config(){return n["config"]}get filePath(){const{path:t,anchor:e,query:s}=Object(h["parseRoute"])(this.$route);return this.anchor=e,this.queryStr=s,t}get shortFilePath(){return Object(h["shortenPath"])(this.filePath)}get rawFilePath(){return Object(h["addBaseUrl"])(this.filePath)}get query(){return Object(h["parseQuery"])(this.queryStr)}get isIndexFile(){return this.filePath===this.config.paths.index}get lastUpdatedMessage(){return` | ${this.config.messages.lastUpdated}${this.updater?` (${this.updater})`:""}`}created(){const t=this.homePath,e=this.shortFilePath;if("prerender"===document.body.id){let s=t;return this.isIndexFile||(s+="#"+e),location.href=s+location.search,void(this.isCancel=!0)}if(location.search){const s=location.search.substr(1)+(this.queryStr?"&"+this.queryStr:"");return location.href=t+Object(h["buildHash"])({path:e,anchor:this.anchor,query:Object(h["formatQuery"])(Object(h["parseQuery"])(s))}),void(this.isCancel=!0)}if(n["enableMultiConf"]){const t=this.query.conf;if(t&&n["confList"][0].includes(t)&&Object(n["getSelectConf"])()!==t)return localStorage.setItem("conf",t),location.reload(),void(this.isCancel=!0)}Object(d["a"])({mainSelf:this,reload:this.reload,filePath:this.filePath}),u(),this.getData().then(({data:t,flags:e,links:s})=>this.setData(t,e,s))}mounted(){this.isCancel||Object(c["simpleUpdateLinkPath"])()}beforeRouteUpdate(t,e,s){const i=Object(h["parseRoute"])(t),a=Object(h["parseRoute"])(e);i.path===a.path&&i.query===a.query||(this.isShow=!1,s(),Object(d["a"])({filePath:this.filePath}),this.reload(!0))}reload(t=!1){Object(c["cleanEventListenerDict"])(),this.getData().then(({data:e,flags:s,links:i})=>{document.querySelectorAll(".custom").forEach(t=>t.remove());let a=l["destructors"].shift();while(a)"function"===typeof a&&a(),a=l["destructors"].shift();this.setData(e,s,i),t&&Object(c["scroll"])(0,!1)})}async getData(){this.fileTs||(this.fileTs=await Object(g["b"])());const{createErrorFile:t,getFile:e}=this.fileTs,s=this.filePath;if(!s.endsWith(".md")){this.isError=!0;const{data:e,flags:i,links:a}=t(s);return{data:e,flags:i,links:a}}const i=[];i.push(e(s));const a=this.config.paths.common;a&&s!==a&&i.push(e(a));const r=await Promise.all(i),n=r[0];let c=n.data;const o=n.flags,h=n.links;if(n.isError)return this.isError=!0,{data:c,flags:o,links:h};if(this.isError=!1,this.hasLoadedBacklinks&&this.getBacklinks().then(),r.length<2||r[1].isError)return{data:c,flags:o,links:h};const d=r[1].data;let u="",f=d;const{key:k,value:m}=Object(l["chopStr"])(d,l["snippetMark"]);return null!==m&&(u=k,f=m),u&&(c=u+"\n\n\n"+c),f&&(c+="\n\n\n"+f),{data:c,flags:o,links:h}}setData(t,e,s){this.setFlags(e),this.fileData=t,this.links=[...s],this.isShow=!0,this.showTime=(new Date).getTime()}setFlags(t){this.title=t.title,document.title=""+this.title,this.config.siteName&&this.config.siteName!==this.title&&(document.title+=" - "+this.config.siteName),this.tags=t.tags?[...t.tags]:[],this.startDate=t.startDate||"",this.endDate=t.endDate||"",this.cover=t.cover||"",this.creator=t.creator||"",this.updater=t.updater||"",this.otherFlags={},Object.keys(t).forEach(e=>{this.flagNames.includes(e)||(this.otherFlags[e]=t[e])})}async getBacklinks(){this.isLoadingBacklinks=!0,this.fileTs||(this.fileTs=await Object(g["b"])());const{getFiles:t,sortFiles:e}=this.fileTs,{files:s,backlinks:i}=await t(),a=i[this.filePath];a&&a.length>0?(this.backlinks=[...a],this.backlinkFiles=a.map(t=>JSON.parse(JSON.stringify(s[t]))).sort(e)):(this.backlinks=[],this.backlinkFiles=[]),this.isLoadingBacklinks=!1,this.hasLoadedBacklinks||(this.hasLoadedBacklinks=!0)}getListHtml(t){return Object(c["createList"])(t).innerHTML}getSearchTagLinks(t){return Object(c["getSearchTagLinks"])(t)}returnHome(){Object(h["returnHome"])()}};_=Object(r["a"])([Object(p["a"])({components:{Article:y}})],_);var T=_,w=T,P=Object(j["a"])(w,i,a,!1,null,null,null);e["default"]=P.exports}}]);